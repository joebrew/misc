##################################
# SET VARIABLES
##################################
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
#"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
#"MOTHER_DOB_DAY, MOTHER_DOB_YEAR, HOME_BIRTH_PLANNED,",
#"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
#"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB_DAY, MOTHER_DOB_YEAR, HOME_BIRTH_PLANNED,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB_DAY, MOTHER_DOB_YEAR,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
sqlColumns(bm, table = "vw_BirthMaster")
sqlColumns()
sqlColumns(bm)
sqlColumns(bm, sqtable = "vw_BirthMaster")
sqlColumns(bm, sqtable = "vw_BirthMaster")[,3]
sqlColumns(bm, sqtable = "vw_BirthMaster")[,4]
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB, HOME_BIRTH_PLANNED,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB,", #HOME_BIRTH_PLANNED,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
#############################
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
#"MOTHER_DOB,", #HOME_BIRTH_PLANNED,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
##################################
# Set up my ODBC Connection
##################################
library(RODBC) # Read in the
bm <- odbcConnect("vw_BirthMaster", uid="BrewJR", pwd="stopFlu2013")
#bm <- odbcConnect("HMS01 Shadow")
##################################
# See which tables I can access
##################################
sqlTables(bm) # in bm, I only need DEATHMASTER and vw_BirthMaster
##################################
# SET VARIABLES
##################################
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
#"MOTHER_DOB,", #HOME_BIRTH_PLANNED,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
#"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
#"MOTHER_DOB,", #HOME_BIRTH_PLANNED,", ####
"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
#"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
#"MOTHER_DOB,", #HOME_BIRTH_PLANNED,", ####
#"DATE_OF_BIRTH, MOTHER_RES_ADDR1, MOTHER_RES_CITY, MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
##################################
# Set up my ODBC Connection
##################################
library(RODBC) # Read in the
bm <- odbcConnect("vw_BirthMaster", uid="BrewJR", pwd="stopFlu2013")
#bm <- odbcConnect("HMS01 Shadow")
##################################
# See which tables I can access
##################################
sqlTables(bm) # in bm, I only need DEATHMASTER and vw_BirthMaster
##################################
# SET VARIABLES
##################################
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB, HOME_BIRTH_PLANNED,",
#"DATE_OF_BIRTH,",
"MOTHER_RES_ADDR1,",
"MOTHER_RES_CITY,",
"MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB, HOME_BIRTH_PLANNED,",
"DATE_OF_BIRTH,",
#"MOTHER_RES_ADDR1,",
"MOTHER_RES_CITY,",
"MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB, HOME_BIRTH_PLANNED,",
"DATE_OF_BIRTH,",
"MOTHER_RES_ADDR1,",
#"MOTHER_RES_CITY,",
"MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 2014:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
##################################
# Set up my ODBC Connection
##################################
library(RODBC) # Read in the
bm <- odbcConnect("vw_BirthMaster", uid="BrewJR", pwd="stopFlu2013")
#bm <- odbcConnect("HMS01 Shadow")
##################################
# See which tables I can access
##################################
sqlTables(bm) # in bm, I only need DEATHMASTER and vw_BirthMaster
##################################
# SET VARIABLES
##################################
myBirthVars <- paste("EVENT_YEAR, NAME_FIRST, NAME_LAST, MOTHER_NAME_FIRST,",
"MOTHER_NAME_LAST, MOTHER_DOB_MONTH,",
"MOTHER_DOB, HOME_BIRTH_PLANNED,",
"DATE_OF_BIRTH,",
"MOTHER_RES_ADDR1,",
#"MOTHER_RES_CITY,",
"MOTHER_RES_ZIP,",
"MOTHER_AGE, MOTHER_RES_COUNTY,",
"MOTHER_EDCODE, MOTHER_MARRIED, BIRTH_WEIGHT_GRAMS, MOTHER_WIC_YESNO,",
"PRINCIPAL_SRCPAY_CODE, INFANT_LIVING, DEATH_OCCURRED, DATE_OF_DEATH,",
"MOTHER_RACE_BLACK, MOTHER_RACE_WHITE,",
"TOBACCO_USE_YESNO,",
"DEATH_SFN")
myDeathVars <- paste("EVENT_YEAR, RESID_COUNTY, STATE_FILE_NUMBER, RESID_STATE, AGE,",
"AGE_CODE, DATE_OF_BIRTH_YEAR")
##################################
# READ IN DATA FROM vw_BirthMaster
##################################
for (i in 1980:2014){
allBirths <- sqlQuery(bm, paste("select",
myBirthVars,
"from vw_BirthMaster",
paste0("where EVENT_YEAR = ", i),
"and MOTHER_RES_STATE = 'FLORIDA'",
"order by MOTHER_RES_COUNTY"))
write.csv(allBirths, paste0("E:/fdoh/private/vital_stats/births",i,".csv"))
rm(allBirths)
#   allDeaths <- sqlQuery(bm, paste("select",
#                                   myDeathVars,
#                                   "from DEATHMASTER",
#                                   paste0("where EVENT_YEAR = ", i),
#                                   "and RESID_STATE = 'FLORIDA'",
#                                   "order by RESID_COUNTY"))
#   write.csv(allDeaths, paste0("E:/fdoh/private/vital_stats/deaths",i,".csv"))
#   rm(allDeaths)
}
library(RCurl)
#########
# SET LOCAL WORKING DIRECTORY
#########
setwd("C:/Users/BrewJR/Documents/misc") # change this line to whereever you cloned misc
#setwd("/home/joebrew/Documents/misc/")
setwd("gnv_crime")
library(rgdal)
#library(sp)
zip <- readOGR("zips_alachua", "ACDPS_zipcode")
zip <- spTransform(zip, CRS("+init=epsg:4326"))
zip$zip <- as.numeric(as.character(zip$ZIP))
library(rCharts)
# read in geojson version of zip
#zip_geoj <- readOGR("zips_alachua", "ACDPS_zipcode")
mymap <- Leaflet$new()
mymap$tileLayer(provider = "Stamen.TonerLite")
mymap$setView(c(29.65, -82.3), zoom = 10)
mymap$enablePopover(TRUE)
mymap$fullScreen(TRUE)
mymap
mymap
